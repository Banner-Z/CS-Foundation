# ALGO4-details

2021/4/13 21:37

**问题描述**

有一棵 n 个节点的树，树上每个节点都有一个正整数权值。如果一个点被选择了，那么在树上和它相邻的点都不能被选择。求选出的点的权值和最大是多少？

**输入格式**

第一行包含一个整数 n 。

接下来的一行包含 n 个正整数，第 i 个正整数代表点 i 的权值。

接下来一共 n-1 行，每行描述树上的一条边。

**输出格式**

输出一个整数，代表选出的点的权值和的最大值。

**样例输入**

5
1 2 3 4 5
1 2
1 3
2 4
2 5

**样例输出**

12

**样例说明**

选择3、4、5号点，权值和为 3+4+5 = 12 。

**数据规模与约定**

对于20%的数据， n <= 20。

对于50%的数据， n <= 1000。

对于100%的数据， n <= 100000。

权值均为不超过1000的正整数。

## 说明

​		做的第一道树形动规，一开始按着常规的dfs去写，也能想清楚出口和递进关系，但是发现没地方把dp放进去，后来看了别人的写法，发现这里不应该用visit数组去记录了，因为一个点在计算的时候应该去累计所有**非（访问逻辑上的）前驱的点**，然后dp的输出也应该是第一个而不是最后一个，因为dfs。

​		用Java做完提交之后发现70分，试了Java的几个数据结构都还是超了内存或者时间，然而c++的vector一下就过了...唯一的疑虑是70分给的结果是运行错误，而不是超内存，但是根据相同算法下c++的结果以及肉眼对比那几个error的用例的内存变化，我暂时认为就是内存的关系。

​		然后当时写不出来最后还是大佬的代码点拨了我：https://www.liuchuo.net/archives/3937

​		居然从下午12：30左右到晚上做的正事就只有这一题。

​		唔，又是毫无成就感的一天呢。

​		嗯？怎么是又。